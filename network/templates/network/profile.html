{% extends "network/layout.html" %}
{%load static %}


{% block body %}

{% block script %}
    <script type="text/javascript" src="{% static 'network/posts.js' %}"></script>
{% endblock %}

<h1>{{username}} Profile</h1>


<h4> Following - {{following}} </h4>
<h4> Followers - {{followers}} </h4>



{% if user.get_username != username %}

  {% if flag == 1 %}

    <a href="{% url 'handleFollow' username flag%}"><strong>Unfollow </strong></a>

  {% elif flag == 0 %}

    <a href="{% url 'handleFollow' username flag%}"><strong>Follow </strong></a>

  {% endif %}


{% endif %}

<div id="all_posts">




<h4> {{username}} - Posts </h4>



  {% for post in posts%}

    <div class="container"
          <p ><strong>{{post.user.username}}</strong> </p>
          <p >{{post.text}}</p>
          <p> <small>{{post.created_at}}</small></p>
          <img src="{% static 'network/small-heart-icon-0.jpg' %}" width="100" height="60">
          <div class="image">
            {{post.likes}}
          </div>
          {% if user.get_username == post.user.username %}
            <button class="edit" value = '{{post.id}}'> <img src="{% static 'network/edit.png' %}" width="30" height="30" >Edit Post</button>  
          {% endif %}
    </div>

  {% endfor %}

    <div class="bottom">
      {% if posts.has_previous %}
        <a href="{% url 'profile' username %}?page={{ posts.previous_page_number }}">Previous</a>
      {% endif %}

      {% if posts.has_next %}
        <a href="{% url 'profile' username %}?page={{ posts.next_page_number }}">Next</a>
      {% endif %}
    </div>

  </div>


  <div id="edit_post">
      <h3>Edit Post</h3>
      <form id="compose-form">
          <textarea class="form-control" id="compose-body" placeholder="Body"></textarea>
          <input type="submit" class="btn btn-primary" value="Save"/>
      </form>
  </div>

{% endblock %}
